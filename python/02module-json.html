<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <title>你好， VuePress ！</title><meta name="description" content="这是我的第一个 VuePress 站点"><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="generator" content="VuePress 2.0.0-beta.23">
    <link rel="preload" href="/assets/js/runtime~app.6d15dac6.js" as="script"><link rel="preload" href="/assets/css/styles.cfc44703.css" as="style"><link rel="preload" href="/assets/js/640.ed334a8d.js" as="script"><link rel="preload" href="/assets/js/app.c77541a8.js" as="script">
    <link rel="stylesheet" href="/assets/css/styles.cfc44703.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container no-sidebar"><header class="navbar"><div class="toggle-sidebar-button"><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><span><a href="/" class=""><img class="logo" src="https://vuejs.org/images/logo.png" alt="你好， VuePress ！"><span class="site-name can-hide">你好， VuePress ！</span></a></span><div class="navbar-links-wrapper" style=""><!--[--><!--]--><nav class="navbar-links can-hide"><!--[--><div class="navbar-links-item"><a href="/design-patterns/" class="nav-link" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vue/" class="nav-link" aria-label="Vue2&amp;Vue3"><!--[--><!--]--> Vue2&amp;Vue3 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="测试工具"><span class="title">测试工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="测试工具"><span class="title">测试工具</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/group/foo.md" class="nav-link" aria-label="/group/foo.md"><!--[--><!--]--> /group/foo.md <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/group/bar.md" class="nav-link" aria-label="/group/bar.md"><!--[--><!--]--> /group/bar.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/bar/README.md" class="nav-link" aria-label="/bar/README.md"><!--[--><!--]--> /bar/README.md <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://gitlab.com/foo/bar" rel="noopener noreferrer" target="_blank" aria-label="GitLab"><!--[--><!--]--> GitLab <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><div class="sidebar-mask"></div><aside class="sidebar"><nav class="navbar-links"><!--[--><div class="navbar-links-item"><a href="/design-patterns/" class="nav-link" aria-label="设计模式"><!--[--><!--]--> 设计模式 <!--[--><!--]--></a></div><div class="navbar-links-item"><a href="/vue/" class="nav-link" aria-label="Vue2&amp;Vue3"><!--[--><!--]--> Vue2&amp;Vue3 <!--[--><!--]--></a></div><div class="navbar-links-item"><div class="dropdown-wrapper"><button class="dropdown-title" type="button" aria-label="测试工具"><span class="title">测试工具</span><span class="arrow down"></span></button><button class="mobile-dropdown-title" type="button" aria-label="测试工具"><span class="title">测试工具</span><span class="right arrow"></span></button><ul style="display:none;" class="nav-dropdown"><!--[--><li class="dropdown-item"><a href="/group/foo.md" class="nav-link" aria-label="/group/foo.md"><!--[--><!--]--> /group/foo.md <!--[--><!--]--></a></li><li class="dropdown-item"><a href="/group/bar.md" class="nav-link" aria-label="/group/bar.md"><!--[--><!--]--> /group/bar.md <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-links-item"><a href="/bar/README.md" class="nav-link" aria-label="/bar/README.md"><!--[--><!--]--> /bar/README.md <!--[--><!--]--></a></div><div class="navbar-links-item"><a class="nav-link external" href="https://gitlab.com/foo/bar" rel="noopener noreferrer" target="_blank" aria-label="GitLab"><!--[--><!--]--> GitLab <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-links"><!--[--><!--]--></ul><!--[--><!--]--></aside><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><p>json ,pickle模块 JSON(JavaScript Object Notation, JS 对象标记) 是一种轻量级的数据交换格式。JSON的数据格式其实就是python里面的字典格式，里面可以包含方括号括起来的数组，也就是python里面的列表。</p><p>在python中，有专门处理json格式的模块—— json 和 picle模块</p><p>Json 模块提供了四个方法： dumps、dump、loads、load</p><p>pickle 模块也提供了四个功能：dumps、dump、loads、load</p><p>一. dumps 和 dump: dumps和dump 序列化方法 dumps只完成了序列化为str， dump必须传文件描述符，将序列化的str保存到文件中</p><p>查看源码： def dumps(obj, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, default=None, sort_keys=False, **kw): # Serialize <code>obj</code> to a JSON formatted <code>str</code>. # 序列号 “obj” 数据类型 转换为 JSON格式的字符串 def dump(obj, fp, skipkeys=False, ensure_ascii=True, check_circular=True, allow_nan=True, cls=None, indent=None, separators=None, default=None, sort_keys=False, **kw): &quot;&quot;&quot;Serialize <code>obj</code> as a JSON formatted stream to <code>fp</code> (a <code>.write()</code>-supporting file-like object). 我理解为两个动作，一个动作是将”obj“转换为JSON格式的字符串，还有一个动作是将字符串写入到文件中，也就是说文件描述符fp是必须要的参数 &quot;&quot;&quot;</p><p>示例代码：</p><div class="language-python ext-py line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> json
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>    <span class="token comment"># dumps可以格式化所有的基本数据类型为字符串</span>
<span class="token string">&#39;[]&#39;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>    <span class="token comment"># 数字</span>
<span class="token string">&#39;1&#39;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token string">&#39;1&#39;</span><span class="token punctuation">)</span>   <span class="token comment"># 字符串</span>
<span class="token string">&#39;&quot;1&quot;&#39;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dict</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;Tom&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token number">23</span><span class="token punctuation">}</span>  
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">)</span>     <span class="token comment"># 字典</span>
<span class="token string">&#39;{&quot;name&quot;: &quot;Tom&quot;, &quot;age&quot;: 23}&#39;</span>
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>a = {&quot;name&quot;:&quot;Tom&quot;, &quot;age&quot;:23} with open(&quot;test.json&quot;, &quot;w&quot;, encoding=&#39;utf-8&#39;) as f: # indent 超级好用，格式化保存字典，默认为None，小于0为零个空格 f.write(json.dumps(a, indent=4)) # json.dump(a,f,indent=4) # 和上面的效果一样 保存的文件效果：</p><p>二. loads 和 load</p><p>loads和load 反序列化方法</p><pre><code>   loads 只完成了反序列化，
   load 只接收文件描述符，完成了读取文件和反序列化
</code></pre><p>查看源码：</p><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>def loads(s, encoding=None, cls=None, object_hook=None, parse_float=None, parse_int=None, parse_constant=None, object_pairs_hook=None, **kw):
    &quot;&quot;&quot;Deserialize ``s`` (a ``str`` instance containing a JSON document) to a Python object.
       将包含str类型的JSON文档反序列化为一个python对象&quot;&quot;&quot;
def load(fp, cls=None, object_hook=None, parse_float=None, parse_int=None, parse_constant=None, object_pairs_hook=None, **kw):
    &quot;&quot;&quot;Deserialize ``fp`` (a ``.read()``-supporting file-like object containing a JSON document) to a Python object.

</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>将一个包含JSON格式数据的可读文件饭序列化为一个python对象&quot;&quot;&quot;</p><p>实例：</p><blockquote><blockquote><blockquote><p>json.loads(&#39;{&quot;name&quot;:&quot;Tom&quot;, &quot;age&quot;:23}&#39;) {&#39;age&#39;: 23, &#39;name&#39;: &#39;Tom&#39;}</p></blockquote></blockquote></blockquote><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>import json
with open(&quot;test.json&quot;, &quot;r&quot;, encoding=&#39;utf-8&#39;) as f:
    aa = json.loads(f.read())
    f.seek(0)
    bb = json.load(f)    # 与 json.loads(f.read())
print(aa)
print(bb)

# 输出：
{&#39;name&#39;: &#39;Tom&#39;, &#39;age&#39;: 23}
{&#39;name&#39;: &#39;Tom&#39;, &#39;age&#39;: 23}
</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>三. json 和 pickle 模块</p><p>json模块和pickle模块都有 dumps、dump、loads、load四种方法，而且用法一样。</p><p>不用的是json模块序列化出来的是通用格式，其它编程语言都认识，就是普通的字符串，</p><p>而picle模块序列化出来的只有python可以认识，其他编程语言不认识的，表现为乱码</p><p>不过picle可以序列化函数，但是其他文件想用该函数，在该文件中需要有该文件的定义（定义和参数必须相同，内容可以不同）</p><p>四. python对象（obj） 与json对象的对应关系</p><p>复制代码 复制代码 +-------------------+---------------+ | Python | JSON | +===================+===============+ | dict | object | +-------------------+---------------+ | list, tuple | array | +-------------------+---------------+ | str | string | +-------------------+---------------+ | int, float | number | +-------------------+---------------+ | True | true | +-------------------+---------------+ | False | false | +-------------------+---------------+ | None | null | +-------------------+---------------+ 复制代码 复制代码</p><p>五. 总结</p><ol><li><p>json序列化方法：</p><pre><code>  dumps：无文件操作            dump：序列化+写入文件
</code></pre></li><li><p>json反序列化方法：</p><pre><code> loads：无文件操作              load： 读文件+反序列化
</code></pre></li><li><p>json模块序列化的数据 更通用</p><p>picle模块序列化的数据 仅python可用，但功能强大，可以序列号函数</p></li><li><p>json模块可以序列化和反序列化的 数据类型 见 python对象（obj） 与json对象的对应关系表</p></li><li><p>格式化写入文件利用 indent = 4</p></li></ol><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="nav-link external meta-item-label" href="https://gitlab.com/foo/bar/-/edit/main/python/02module-json.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" ariahidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><!--[--><span class="sr-only">open in new window</span><!--]--></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><span class="meta-item-info">2021/7/6下午7:52:33</span></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: lyl07583@ly.com">刘玉路</span><!----><!--]--><!--]--></span></div></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script src="/assets/js/runtime~app.6d15dac6.js" defer></script><script src="/assets/js/640.ed334a8d.js" defer></script><script src="/assets/js/app.c77541a8.js" defer></script>
  </body>
</html>
